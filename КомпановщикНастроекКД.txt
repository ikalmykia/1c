&НаСервере
Процедура ВывестиДеревоСКД()
	
	СхемаКомпоновки = ПолучитьИзВременногоХранилища(АдресСхемы);	
	НастройкиКомпоновки = КомпановщикНастроекКД.Настройки;
	НастройкиКомпоновки.ПараметрыДанных.УстановитьЗначениеПараметра("Ссылка", ДокументСсылка);
	КомпоновщикМакета = Новый КомпоновщикМакетаКомпоновкиДанных;
	МакетКомпоновки = КомпоновщикМакета.Выполнить(СхемаКомпоновки, НастройкиКомпоновки,,, Тип("ГенераторМакетаКомпоновкиДанныхДляКоллекцииЗначений"));
	ПроцессорКомпоновки = Новый ПроцессорКомпоновкиДанных;
	ВнешниеИсточники = Новый Структура("Данные", ТЗ);
	ПроцессорКомпоновки.Инициализировать(МакетКомпоновки, ВнешниеИсточники);
	ПроцессорВывода = Новый ПроцессорВыводаРезультатаКомпоновкиДанныхВКоллекциюЗначений;
	ДеревоЗначений = Новый ДеревоЗначений;
	ПроцессорВывода.УстановитьОбъект(ДеревоЗначений);
	ПроцессорВывода.Вывести(ПроцессорКомпоновки);
	
КонецПроцедуры

//Эта процедуру необходимо вызвать при создании на сервере
&НаСервере
Процедура ИнициализироватьКомпановщикНастроек()
	
	ВнешОбработка = РеквизитФормыВЗначение("Объект");
	
	СхемаКомпоновки = ВнешОбработка.ПолучитьМакет("МакетСКД");
	АдресСхемы = ПоместитьВоВременноеХранилище(СхемаКомпоновки, УникальныйИдентификатор);
	КомпановщикНастроекКД.Инициализировать(Новый ИсточникДоступныхНастроекКомпоновкиДанных(АдресСхемы));
	КомпановщикНастроекКД.ЗагрузитьНастройки(СхемаКомпоновки.НастройкиПоУмолчанию);

КонецПроцедуры 